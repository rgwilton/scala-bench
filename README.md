# scala-bench
Some benchmarks of memory and runtime performance of Scala's collections

Clone of Li Haoyi's version.

Moved to Scala 2.12.3 & sbt 1.0.
Increased work in tests to make array's a fairer comparision.
Changed results to be amortized per element (times should be nano-seconds).
Added some extra tests for updating arrays.

These are informal results from running on my laptop.  Times are amortized per element times (should be in nano-seconds).

| Size | 0 | 1 | 4 | 16 | 64 | 256 | 1,024 | 4,096 | 16,192 | 65,536 | 262,144 | 1,048,576 |
 -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | -- | --
| Run 1 |
| construct |
| List | 15 | 91 | 55 | 54 | 54 | 52 | 50 | 46 | 47 | 48 | 53 | 70 |
| Vector | 37 | 103 | 101 | 93 | 100 | 96 | 99 | 106 | 102 | 110 | 110 | 115 |
| Set | 49 | 63 | 59 | 365 | 325 | 416 | 446 | 593 | 727 | 1110 | 1280 | 1432 |
| Map | 60 | 73 | 94 | 400 | 387 | 438 | 485 | 603 | 744 | 976 | 1313 | 1544 |
| Array:+ | 54 | 96 | 60 | 58 | 74 | 228 | 643 | 1733 | 7465 |
| Array-prealloc | 88 | 86 | 25 | 11 | 8 | 7 | 7 | 7 | 7 | 7 | 7 | 7 |
| Array.toSet | 251 | 259 | 121 | 325 | 349 | 390 | 448 | 567 | 754 | 963 | 1197 | 1400 |
| Array.toVector | 255 | 303 | 133 | 43 | 31 | 25 | 24 | 25 | 24 | 24 | 23 | 23 |
| Array.toMap | 122 | 142 | 108 | 336 | 370 | 399 | 463 | 588 | 753 | 874 | 1172 | 1329 |
| m.Buffer | 92 | 163 | 75 | 54 | 50 | 50 | 54 | 51 | 52 | 46 | 49 | 49 |
| m.Set | 98 | 287 | 172 | 219 | 240 | 248 | 248 | 247 | 323 | 511 | 609 | 708 |
| m.Map | 80 | 220 | 159 | 211 | 212 | 223 | 245 | 262 | 406 | 587 | 712 | 806 |
| foreach |
| List | 78 | 25 | 20 | 15 | 16 | 17 | 14 | 15 | 15 | 17 | 17 | 18 |
| List-while | 81 | 14 | 10 | 9 | 9 | 9 | 9 | 9 | 11 | 17 | 18 | 20 |
| Vector | 543 | 61 | 17 | 8 | 13 | 10 | 9 | 10 | 9 | 12 | 10 | 11 |
| Set | 240 | 30 | 16 | 44 | 47 | 48 | 66 | 129 | 207 | 238 | 280 | 351 |
| Map | 497 | 54 | 34 | 54 | 54 | 62 | 74 | 120 | 202 | 266 | 300 | 360 |
| Array | 219 | 37 | 22 | 18 | 20 | 17 | 16 | 16 | 16 | 15 | 17 | 16 |
| Array-while | 107 | 22 | 7 | 5 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |
| m.Buffer | 109 | 21 | 7 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 |
| m.Set | 593 | 68 | 35 | 29 | 29 | 31 | 33 | 41 | 50 | 65 | 77 | 82 |
| m.Map | 539 | 103 | 57 | 43 | 42 | 43 | 47 | 58 | 94 | 140 | 180 | 203 |
| lookup |
| List | 90 | 4 | 2 | 4 | 18 | 79 | 341 | 1558 | 7110 |
| Vector | 88 | 5 | 1 | 1 | 1 | 1 | 1 | 2 | 2 | 3 | 3 | 3 |
| Set | 238 | 7 | 6 | 14 | 16 | 18 | 24 | 36 | 70 | 114 | 158 | 218 |
| Map | 346 | 13 | 8 | 17 | 20 | 19 | 29 | 88 | 88 | 112 | 131 | 81 |
| Array | 101 | 3 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
| m.Buffer | 103 | 5 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
| m.Set | 327 | 50 | 42 | 44 | 46 | 44 | 47 | 51 | 70 | 78 | 83 | 94 |
| m.Map | 642 | 28 | 16 | 14 | 14 | 15 | 15 | 23 | 40 | 55 | 63 | 79 |
| immutable update (replace) |
| Vector | 99 | 213 | 132 | 99 | 242 | 234 | 239 | 356 | 268 | 322 | 297 | 321 |
| Map | 472 | 684 | 343 | 413 | 540 | 569 | 715 | 1258 | 1633 | 2109 | 2590 | 6575 |
| Array (copy) | 99 | 124 | 60 | 50 | 86 | 285 | 1007 | 3797 | 14315 |
| Array (in place) | 96 | 112 | 46 | 26 | 27 | 25 | 23 | 25 | 23 | 24 | 22 | 26 |
| immutable update (insert) |
| Vector | 101 | 1290 | 1221 | 1028 | 1117 | 1057 | 1036 | 1062 | 1005 | 1093 | 1064 | 1070 |
| Map | 444 | 757 | 570 | 504 | 548 | 635 | 903 | 1356 | 1791 | 2467 | 2882 | 9612 |
